/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   Core.cpp                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: fgalaup <fgalaup@student.42lyon.fr>        +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2021/07/03 14:45:07 by fgalaup           #+#    #+#             */
/*   Updated: 2021/07/27 16:47:16 by fgalaup          ###   ########lyon.fr   */
/*                                                                            */
/* ************************************************************************** */

#include "Core/Core.hpp"


int main(int argc, char const *argv[])
{
	if (argc > 2)
	{
		cerr << "Error :Wrong number of arguments." << endl;
		return (1);
	}
	
	if (argc > 1)
		Core ServerCore(argv[1]);
	else
		Core ServerCore("./default-server-config.json");
	return (0);
}

// ! Remove later
#include <fcntl.h>

Core::Core(string config_file_name)
{
	(void)config_file_name;

	cout << " [39m[38;2;184;1;198m [39m[38;2;180;1;202m_[39m[38;2;176;2;205m_[39m[38;2;172;2;208m [39m[38;2;168;3;211m [39m[38;2;164;4;215m [39m[38;2;160;5;218m [39m[38;2;156;6;221m [39m[38;2;152;7;223m [39m[38;2;147;9;226m [39m[38;2;143;10;229m [39m[38;2;139;12;231m [39m[38;2;135;14;234m [39m[38;2;131;16;236m_[39m[38;2;126;18;238m_[39m[38;2;122;20;240m [39m[38;2;118;23;242m [39m[38;2;114;25;244m_[39m[38;2;110;28;245m [39m[38;2;105;30;247m [39m[38;2;101;33;248m [39m[38;2;97;36;249m [39m[38;2;93;39;251m [39m[38;2;89;42;252m [39m[38;2;85;45;252m [39m[38;2;81;48;253m [39m[38;2;77;52;254m_[39m[38;2;73;55;254m_[39m[38;2;69;59;254m_[39m[38;2;66;62;254m_[39m[38;2;62;66;254m_[39m[38;2;58;70;254m [39m[38;2;55;74;254m [39m[38;2;51;77;254m [39m[38;2;48;81;253m [39m[38;2;45;85;252m [39m[38;2;42;89;251m [39m[38;2;39;93;251m [39m[38;2;36;97;249m [39m[38;2;33;102;248m [39m[38;2;30;106;247m [39m[38;2;27;110;245m [39m[38;2;25;114;244m [39m[38;2;22;118;242m [39m[38;2;20;123;240m [39m[38;2;18;127;238m [39m[38;2;16;131;236m [39m[38;2;14;135;233m [39m[38;2;12;140;231m [39m[38;2;10;144;228m [39m[38;2;9;148;226m [39m[38;2;7;152;223m [39m[38;2;6;156;220m [39m[38;2;5;160;217m [39m[38;2;4;164;214m [39m[38;2;3;168;211m [39m[38;2;2;172;208m [39m[38;2;2;176;205m[39m" << endl;
	cout << " [39m[38;2;172;2;208m [39m[38;2;168;3;211m\\[39m[38;2;164;4;215m [39m[38;2;160;5;218m\\[39m[38;2;156;6;221m [39m[38;2;152;7;223m [39m[38;2;147;9;226m [39m[38;2;143;10;229m [39m[38;2;139;12;231m [39m[38;2;135;14;234m [39m[38;2;131;16;236m [39m[38;2;126;18;238m [39m[38;2;122;20;240m/[39m[38;2;118;23;242m [39m[38;2;114;25;244m/[39m[38;2;110;28;245m [39m[38;2;105;30;247m|[39m[38;2;101;33;248m [39m[38;2;97;36;249m|[39m[38;2;93;39;251m [39m[38;2;89;42;252m [39m[38;2;85;45;252m [39m[38;2;81;48;253m [39m[38;2;77;52;254m [39m[38;2;73;55;254m [39m[38;2;69;59;254m/[39m[38;2;66;62;254m [39m[38;2;62;66;254m_[39m[38;2;58;70;254m_[39m[38;2;55;74;254m_[39m[38;2;51;77;254m_[39m[38;2;48;81;253m|[39m[38;2;45;85;252m [39m[38;2;42;89;251m [39m[38;2;39;93;251m [39m[38;2;36;97;249m [39m[38;2;33;102;248m [39m[38;2;30;106;247m [39m[38;2;27;110;245m [39m[38;2;25;114;244m [39m[38;2;22;118;242m [39m[38;2;20;123;240m [39m[38;2;18;127;238m [39m[38;2;16;131;236m [39m[38;2;14;135;233m [39m[38;2;12;140;231m [39m[38;2;10;144;228m [39m[38;2;9;148;226m [39m[38;2;7;152;223m [39m[38;2;6;156;220m [39m[38;2;5;160;217m [39m[38;2;4;164;214m [39m[38;2;3;168;211m [39m[38;2;2;172;208m [39m[38;2;2;176;205m [39m[38;2;1;180;201m [39m[38;2;1;184;198m [39m[38;2;1;188;194m[39m" << endl;
	cout << " [39m[38;2;160;5;218m [39m[38;2;156;6;221m [39m[38;2;152;7;223m\\[39m[38;2;147;9;226m [39m[38;2;143;10;229m\\[39m[38;2;139;12;231m [39m[38;2;135;14;234m [39m[38;2;131;16;236m/[39m[38;2;126;18;238m\\[39m[38;2;122;20;240m [39m[38;2;118;23;242m [39m[38;2;114;25;244m/[39m[38;2;110;28;245m [39m[38;2;105;30;247m/[39m[38;2;101;33;248m_[39m[38;2;97;36;249m_[39m[38;2;93;39;251m|[39m[38;2;89;42;252m [39m[38;2;85;45;252m|[39m[38;2;81;48;253m_[39m[38;2;77;52;254m_[39m[38;2;73;55;254m [39m[38;2;69;59;254m [39m[38;2;66;62;254m [39m[38;2;62;66;254m|[39m[38;2;58;70;254m [39m[38;2;55;74;254m([39m[38;2;51;77;254m_[39m[38;2;48;81;253m_[39m[38;2;45;85;252m_[39m[38;2;42;89;251m [39m[38;2;39;93;251m [39m[38;2;36;97;249m [39m[38;2;33;102;248m_[39m[38;2;30;106;247m_[39m[38;2;27;110;245m_[39m[38;2;25;114;244m [39m[38;2;22;118;242m_[39m[38;2;20;123;240m [39m[38;2;18;127;238m_[39m[38;2;16;131;236m_[39m[38;2;14;135;233m_[39m[38;2;12;140;231m_[39m[38;2;10;144;228m [39m[38;2;9;148;226m [39m[38;2;7;152;223m [39m[38;2;6;156;220m_[39m[38;2;5;160;217m_[39m[38;2;4;164;214m_[39m[38;2;3;168;211m_[39m[38;2;2;172;208m_[39m[38;2;2;176;205m [39m[38;2;1;180;201m_[39m[38;2;1;184;198m [39m[38;2;1;188;194m_[39m[38;2;1;191;191m_[39m[38;2;1;195;187m [39m[38;2;1;199;183m[39m" << endl;
	cout << " [39m[38;2;147;9;226m [39m[38;2;143;10;229m [39m[38;2;139;12;231m [39m[38;2;135;14;234m\\[39m[38;2;131;16;236m [39m[38;2;126;18;238m\\[39m[38;2;122;20;240m/[39m[38;2;118;23;242m [39m[38;2;114;25;244m [39m[38;2;110;28;245m\\[39m[38;2;105;30;247m/[39m[38;2;101;33;248m [39m[38;2;97;36;249m/[39m[38;2;93;39;251m [39m[38;2;89;42;252m_[39m[38;2;85;45;252m [39m[38;2;81;48;253m\\[39m[38;2;77;52;254m [39m[38;2;73;55;254m'[39m[38;2;69;59;254m_[39m[38;2;66;62;254m [39m[38;2;62;66;254m\\[39m[38;2;58;70;254m [39m[38;2;55;74;254m [39m[38;2;51;77;254m [39m[38;2;48;81;253m\\[39m[38;2;45;85;252m_[39m[38;2;42;89;251m_[39m[38;2;39;93;251m_[39m[38;2;36;97;249m [39m[38;2;33;102;248m\\[39m[38;2;30;106;247m [39m[38;2;27;110;245m/[39m[38;2;25;114;244m [39m[38;2;22;118;242m_[39m[38;2;20;123;240m [39m[38;2;18;127;238m\\[39m[38;2;16;131;236m [39m[38;2;14;135;233m'[39m[38;2;12;140;231m_[39m[38;2;10;144;228m_[39m[38;2;9;148;226m\\[39m[38;2;7;152;223m [39m[38;2;6;156;220m\\[39m[38;2;5;160;217m [39m[38;2;4;164;214m/[39m[38;2;3;168;211m [39m[38;2;2;172;208m/[39m[38;2;2;176;205m [39m[38;2;1;180;201m_[39m[38;2;1;184;198m [39m[38;2;1;188;194m\\[39m[38;2;1;191;191m [39m[38;2;1;195;187m'[39m[38;2;1;199;183m_[39m[38;2;1;202;179m_[39m[38;2;2;206;175m|[39m[38;2;2;209;171m[39m" << endl;
	cout << " [39m[38;2;135;14;234m [39m[38;2;131;16;236m [39m[38;2;126;18;238m [39m[38;2;122;20;240m [39m[38;2;118;23;242m\\[39m[38;2;114;25;244m [39m[38;2;110;28;245m [39m[38;2;105;30;247m/[39m[38;2;101;33;248m\\[39m[38;2;97;36;249m [39m[38;2;93;39;251m [39m[38;2;89;42;252m/[39m[38;2;85;45;252m [39m[38;2;81;48;253m [39m[38;2;77;52;254m_[39m[38;2;73;55;254m_[39m[38;2;69;59;254m/[39m[38;2;66;62;254m [39m[38;2;62;66;254m|[39m[38;2;58;70;254m_[39m[38;2;55;74;254m)[39m[38;2;51;77;254m [39m[38;2;48;81;253m|[39m[38;2;45;85;252m [39m[38;2;42;89;251m [39m[38;2;39;93;251m_[39m[38;2;36;97;249m_[39m[38;2;33;102;248m_[39m[38;2;30;106;247m_[39m[38;2;27;110;245m)[39m[38;2;25;114;244m [39m[38;2;22;118;242m|[39m[38;2;20;123;240m [39m[38;2;18;127;238m [39m[38;2;16;131;236m_[39m[38;2;14;135;233m_[39m[38;2;12;140;231m/[39m[38;2;10;144;228m [39m[38;2;9;148;226m|[39m[38;2;7;152;223m [39m[38;2;6;156;220m [39m[38;2;5;160;217m [39m[38;2;4;164;214m\\[39m[38;2;3;168;211m [39m[38;2;2;172;208mV[39m[38;2;2;176;205m [39m[38;2;1;180;201m/[39m[38;2;1;184;198m [39m[38;2;1;188;194m [39m[38;2;1;191;191m_[39m[38;2;1;195;187m_[39m[38;2;1;199;183m/[39m[38;2;1;202;179m [39m[38;2;2;206;175m|[39m[38;2;2;209;171m [39m[38;2;3;212;167m [39m[38;2;4;215;163m [39m[38;2;5;218;159m[39m" << endl;
	cout << " [39m[38;2;118;23;242m  [39m[38;2;114;25;244m [39m[38;2;110;28;245m [39m[38;2;105;30;247m [39m[38;2;101;33;248m\\[39m[38;2;97;36;249m/[39m[38;2;93;39;251m [39m[38;2;89;42;252m [39m[38;2;85;45;252m\\[39m[38;2;81;48;253m/[39m[38;2;77;52;254m [39m[38;2;73;55;254m\\[39m[38;2;69;59;254m_[39m[38;2;66;62;254m_[39m[38;2;62;66;254m_[39m[38;2;58;70;254m|[39m[38;2;55;74;254m_[39m[38;2;51;77;254m.[39m[38;2;48;81;253m_[39m[38;2;45;85;252m_[39m[38;2;42;89;251m/[39m[38;2;39;93;251m [39m[38;2;36;97;249m [39m[38;2;33;102;248m|[39m[38;2;30;106;247m_[39m[38;2;27;110;245m_[39m[38;2;25;114;244m_[39m[38;2;22;118;242m_[39m[38;2;20;123;240m_[39m[38;2;18;127;238m/[39m[38;2;16;131;236m [39m[38;2;14;135;233m\\[39m[38;2;12;140;231m_[39m[38;2;10;144;228m_[39m[38;2;9;148;226m_[39m[38;2;7;152;223m|[39m[38;2;6;156;220m_[39m[38;2;5;160;217m|[39m[38;2;4;164;214m [39m[38;2;3;168;211m [39m[38;2;2;172;208m [39m[38;2;2;176;205m [39m[38;2;1;180;201m\\[39m[38;2;1;184;198m_[39m[38;2;1;188;194m/[39m[38;2;1;191;191m [39m[38;2;1;195;187m\\[39m[38;2;1;199;183m_[39m[38;2;1;202;179m_[39m[38;2;2;206;175m_[39m[38;2;2;209;171m|[39m[38;2;3;212;167m_[39m[38;2;4;215;163m|[39m[38;2;5;218;159m [39m[38;2;6;221;155m [39m[38;2;8;224;151m [39m[38;2;9;227;147m[39m \n\n" << endl;


	cout << "Load Config :"; 
	cout << "						[\033[31m KO \033[0m]" << endl; 
	cout << "Socket Initialisation :";

	ConnectionManager Network;
	Socket*	defaultHTTPSocket = new Socket();
	Network.registerSocket(defaultHTTPSocket);

	cout << "					[\033[32m OK \033[0m]" << endl; 
	cout << "Connection Manager starting :"; 
	cout << "				[\033[31m KO \033[0m]" << endl; 
	Network.monitorFileDescriptor();
	cout << "server is ready. waiting client request !" << endl; 
}

 

// Core::LoadConfigFile()
// {
	
// }

Core::~Core()
{
	
}
